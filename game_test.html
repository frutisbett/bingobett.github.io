<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BingoBett - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #1a1a1a; 
            color: white; 
            padding: 20px;
            line-height: 1.6;
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
        }
        .test-result { 
            margin: 5px 0; 
            padding: 8px; 
            border-radius: 5px;
            font-size: 14px;
        }
        .success { background: #4caf50; }
        .error { background: #f44336; }
        .warning { background: #ff9800; }
        .info { background: #2196f3; }
        .test-link {
            display: inline-block;
            margin: 10px 5px;
            padding: 10px 15px;
            background: #9c27b0;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .test-link:hover { background: #7b1fa2; }
        h2 { color: gold; margin-bottom: 15px; }
        h3 { color: #4caf50; margin-bottom: 10px; }
    </style>
</head>
<body>
    <h1>üé∞ BingoBett - –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h1>
    
    <div class="test-section">
        <h2>üîó –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h2>
        <a href="http://localhost:8000/index.html" class="test-link" target="_blank">üéÆ –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–∞</a>
        <a href="http://localhost:8000/test_page.html" class="test-link" target="_blank">‚ö° –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã</a>
        <a href="#" class="test-link" onclick="location.reload()">üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</a>
    </div>

    <div class="test-section">
        <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div id="test-results"></div>
    </div>

    <script>
        const results = document.getElementById('test-results');
        let testCount = 0;
        let passedCount = 0;
        
        function addResult(message, type = 'success') {
            testCount++;
            if (type === 'success') passedCount++;
            
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `<strong>[${testCount}]</strong> ${message}`;
            results.appendChild(div);
        }

        function addSection(title) {
            const h3 = document.createElement('h3');
            h3.textContent = title;
            results.appendChild(h3);
        }

        // –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
        addSection('üîß –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã JavaScript');

        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–≥—Ä—ã
        try {
            const gameVars = {
                balance: 777,
                betAmount: 10,
                jackpot: 2200453,
                columns: 5,
                rows: 4,
                minBet: 10,
                maxBet: 80
            };
            
            if (gameVars.balance > 0 && gameVars.betAmount >= gameVars.minBet && gameVars.jackpot > 0) {
                addResult('‚úì –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö');
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ –∏–≥—Ä–æ–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: ' + e.message, 'error');
        }

        // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ —Å–ª–æ—Ç-–º–∞—à–∏–Ω—ã
        try {
            const symbols = ["üçí","üçã","üçä","üçâ","üçá","üçì","üçç","ü•ù","üçå","ü••","üéÅ","üíé","‚≠ê","üÉè","üëë","üí∞"];
            const payTable = {
                "üçí": {3:5, 4:10, 5:20}, "üçã": {3:5, 4:10, 5:20}, "üçä": {3:5, 4:10, 5:20},
                "üçâ": {3:5, 4:10, 5:20}, "üçá": {3:5, 4:10, 5:20}, "üçì": {3:7, 4:14, 5:28},
                "üí∞": {3:100, 4:200, 5:500}
            };
            
            if (symbols.length >= 16 && payTable["üçí"] && payTable["üí∞"]) {
                addResult('‚úì –°–∏–º–≤–æ–ª—ã –∏ —Ç–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error('–ù–µ–ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤');
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–∏–º–≤–æ–ª–æ–≤: ' + e.message, 'error');
        }

        // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage
        try {
            const testData = {
                balance: '1000',
                bet: '20',
                username: 'TestUser'
            };
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º
            Object.keys(testData).forEach(key => {
                localStorage.setItem(`test_${key}`, testData[key]);
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º
            let allCorrect = true;
            Object.keys(testData).forEach(key => {
                if (localStorage.getItem(`test_${key}`) !== testData[key]) {
                    allCorrect = false;
                }
            });
            
            // –û—á–∏—â–∞–µ–º
            Object.keys(testData).forEach(key => {
                localStorage.removeItem(`test_${key}`);
            });
            
            if (allCorrect) {
                addResult('‚úì localStorage —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage');
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ localStorage: ' + e.message, 'error');
        }

        addSection('üéÆ –¢–µ—Å—Ç—ã –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏');

        // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Å–∞ FreeSpinsManager
        try {
            class TestFreeSpinsManager {
                constructor() {
                    this.freeSpins = 55;
                    this.registrationTime = Date.now();
                }
                
                getFreeSpins() {
                    return this.freeSpins;
                }
                
                useFreeSpins(count = 1) {
                    if (this.freeSpins >= count) {
                        this.freeSpins -= count;
                        return true;
                    }
                    return false;
                }
            }
            
            const manager = new TestFreeSpinsManager();
            const initial = manager.getFreeSpins();
            const used = manager.useFreeSpins(1);
            const after = manager.getFreeSpins();
            
            if (initial === 55 && used === true && after === 54) {
                addResult('‚úì –ú–µ–Ω–µ–¥–∂–µ—Ä —Ñ—Ä–∏—Å–ø–∏–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error(`–ù–µ–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞: ${initial}, ${used}, ${after}`);
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ñ—Ä–∏—Å–ø–∏–Ω–æ–≤: ' + e.message, 'error');
        }

        // –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ –≤—ã–∏–≥—Ä—ã—à–µ–π
        try {
            function calculateWin(symbol, count, bet) {
                const payTable = {
                    "üçí": {3:5, 4:10, 5:20},
                    "üí∞": {3:100, 4:200, 5:500}
                };
                
                if (payTable[symbol] && payTable[symbol][count]) {
                    return payTable[symbol][count] * bet;
                }
                return 0;
            }
            
            const tests = [
                {symbol: "üçí", count: 3, bet: 10, expected: 50},
                {symbol: "üí∞", count: 5, bet: 20, expected: 10000},
                {symbol: "üçã", count: 3, bet: 10, expected: 0}
            ];
            
            let allPassed = true;
            tests.forEach(test => {
                const result = calculateWin(test.symbol, test.count, test.bet);
                if (result !== test.expected) {
                    allPassed = false;
                }
            });
            
            if (allPassed) {
                addResult('‚úì –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤—ã–∏–≥—Ä—ã—à–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –≤—ã–∏–≥—Ä—ã—à–µ–π');
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –≤—ã–∏–≥—Ä—ã—à–µ–π: ' + e.message, 'error');
        }

        addSection('üåê –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞');

        // –¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        try {
            const testContainer = document.createElement('div');
            testContainer.id = 'test-slot-machine';
            document.body.appendChild(testContainer);
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª–æ—Ç—ã
            for (let i = 0; i < 20; i++) {
                const slot = document.createElement('div');
                slot.className = 'test-slot';
                slot.textContent = 'üçí';
                testContainer.appendChild(slot);
            }
            
            const slots = testContainer.querySelectorAll('.test-slot');
            
            if (slots.length === 20 && slots[0].textContent === 'üçí') {
                addResult('‚úì –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error('–ù–µ–≤–µ—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ª–æ—Ç–æ–≤');
            }
            
            document.body.removeChild(testContainer);
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ—Ç–æ–≤: ' + e.message, 'error');
        }

        // –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        try {
            const button = document.createElement('button');
            let eventFired = false;
            
            button.addEventListener('click', () => {
                eventFired = true;
            });
            
            // –°–∏–º—É–ª–∏—Ä—É–µ–º –∫–ª–∏–∫
            button.click();
            
            if (eventFired) {
                addResult('‚úì –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error('–°–æ–±—ã—Ç–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ');
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π: ' + e.message, 'error');
        }

        addSection('‚ö° –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏');

        // –¢–µ—Å—Ç 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        try {
            const startTime = performance.now();
            const elements = [];
            
            for (let i = 0; i < 1000; i++) {
                const div = document.createElement('div');
                div.textContent = `Element ${i}`;
                elements.push(div);
            }
            
            const endTime = performance.now();
            const duration = endTime - startTime;
            
            if (duration < 100 && elements.length === 1000) {
                addResult(`‚úì –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å DOM –æ–ø–µ—Ä–∞—Ü–∏–π: ${duration.toFixed(2)}ms`);
            } else {
                addResult(`‚ö† –ú–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å DOM: ${duration.toFixed(2)}ms`, 'warning');
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ' + e.message, 'error');
        }

        addSection('üîí –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏');

        // –¢–µ—Å—Ç 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–≤–æ–¥–∞
        try {
            function validateCardNumber(cardNumber) {
                const cleaned = cardNumber.replace(/\s/g, '');
                return /^\d{16}$/.test(cleaned);
            }
            
            const validCards = ['1234567890123456', '1234 5678 9012 3456'];
            const invalidCards = ['123456789012345', 'abcd5678901234567', '1234-5678-9012-3456'];
            
            let validationWorks = true;
            
            validCards.forEach(card => {
                if (!validateCardNumber(card)) validationWorks = false;
            });
            
            invalidCards.forEach(card => {
                if (validateCardNumber(card)) validationWorks = false;
            });
            
            if (validationWorks) {
                addResult('‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
            } else {
                throw new Error('–ù–µ–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è');
            }
        } catch (e) {
            addResult('‚úó –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: ' + e.message, 'error');
        }

        // –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        setTimeout(() => {
            addSection('üìà –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã');
            
            const successRate = (passedCount / testCount * 100).toFixed(1);
            
            if (successRate >= 90) {
                addResult(`üéâ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ü—Ä–æ–π–¥–µ–Ω–æ ${passedCount}/${testCount} —Ç–µ—Å—Ç–æ–≤ (${successRate}%)`, 'success');
                addResult('üöÄ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!', 'info');
            } else if (successRate >= 70) {
                addResult(`‚ö† –•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ü—Ä–æ–π–¥–µ–Ω–æ ${passedCount}/${testCount} —Ç–µ—Å—Ç–æ–≤ (${successRate}%)`, 'warning');
                addResult('üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã', 'info');
            } else {
                addResult(`‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞! –ü—Ä–æ–π–¥–µ–Ω–æ ${passedCount}/${testCount} —Ç–µ—Å—Ç–æ–≤ (${successRate}%)`, 'error');
                addResult('üî® –ù–µ–æ–±—Ö–æ–¥–∏–º—ã —Å–µ—Ä—å–µ–∑–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è', 'info');
            }
            
            addResult('üéÆ –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ: http://localhost:8000/index.html', 'info');
        }, 500);
    </script>
</body>
</html>